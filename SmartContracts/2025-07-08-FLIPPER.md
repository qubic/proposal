# Smart Contract Proposal - FLIPPER - 2025-07-08

This proposal introduces the Smart Contract **FLIPPER**, designed to be deployed directly on QUBIC.  
The contract is **complementary to the `HashStore` Smart Contract** and is part of a broader architecture to build an **EVM-based Layer 2 (L2)** system — where contracts are executed off-chain, and their final state is anchored on-chain through cryptographic hashes.

## Proposal

Approve the deployment of the Smart Contract **FLIPPER** on the QUBIC network.

This contract will serve as a minimal logic unit for execution testing in external environments (L2), while allowing its result to be tracked on-chain through the `HashStore` contract.

This is an **infrastructure-only contract**.  
It does **not handle any value** and **does not generate revenue** for shareholders.  
Any invocation fees are **burned**.

### Voting Options

> Option 1: Yes, allow  
> Option 2: No

---

## Background

- The `FLIPPER` contract is deployed **on-chain in QUBIC**, and its source has already been proposed in: [Pull Request #14](https://github.com/qubic/proposal/pull/14)
- It complements the proposed `HashStore` contract, enabling the storage of 32-byte state hashes that represent contract execution performed outside of QUBIC.
- Together, these contracts establish the foundation of a **modular Layer 2** using external EVM-compatible logic with **QUBIC as the final settlement and validation layer**.

---

## Contract Behavior

- Stores a single boolean value (`bit`);
- The public function `flip()` toggles the current value;
- Returns the updated value as output;
- Minimal state and logic, ideal for proof-of-concept and testing.

---

## Contract Code

```cpp
// src/contracts/Flipper.h

struct FLIPPER {
    bit value;
};

struct Flip_input {};
struct Flip_output {
    bit value;
};

PUBLIC_FUNCTION(flip)
{
    state.value = !state.value;
    output.value = state.value;
}

void REGISTER_USER_FUNCTIONS_AND_PROCEDURES() {
    REGISTER_USER_FUNCTION(flip, 1);
}
```

---

## Integration with HashStore and Off-Chain Execution

FLIPPER is used within an external backend (e.g. EVM-compatible execution engine).
After running flip() in this off-chain environment, the new state is serialized, hashed (32 bytes), and submitted to the QUBIC HashStore contract.

This creates a verifiable link between off-chain logic and QUBIC's immutable ledger — enabling settlement, auditability, and traceability.

**The flow is:**
1. FLIPPER is executed off-chain in L2;
2. The backend computes the resulting state hash;
3. This hash is stored on QUBIC using HashStore;
4. Auditors or other users can verify this chain of execution.

---

## Rationale

- Establishes a minimal, auditable smart contract on QUBIC;
- Enables and demonstrates the integration with external L2 environments;
- Provides a foundation for execution verification using state hashes;
- Directly supports the L2 EVM architecture using QUBIC for state anchoring;
- Empowers developers to test, simulate, and audit contract logic modularly.

---

## Conclusion

Approving the FLIPPER contract enables:

- A live demonstration of QUBIC-based state anchoring for external systems;
- The start of a modular, extensible EVM-compatible Layer 2 architecture;
- Transparent and immutable state tracking on QUBIC;
- A developer-friendly entry point for infrastructure experimentation.

FLIPPER is the first practical step in enabling hybrid off-chain/on-chain execution models on QUBIC. 